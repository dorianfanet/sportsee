<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: services/userData.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: services/userData.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import fetchData from "./fetchData"
import caloriesIcon from '../assets/calories.svg'
import proteinsIcon from '../assets/proteins.svg'
import carbsIcon from '../assets/carbs.svg'
import lipidsIcon from '../assets/lipids.svg'

const apiUrl = 'http://localhost:3000'

export default class userData {

  /**
   * 
   * @param {number} id - ID of the current user
   */
  constructor(id) {
    this.id = id
  }

  /**
   * Fetch main user data
   * @returns {Promise}
   */
  async getUserInfos() {
    const response = await fetchData(`${apiUrl}/user/${this.id}`)
    const data = response

    return {
      firstName: data.userInfos.firstName,
      lastName: data.userInfos.lastName,
      score: (data.score || data.todayScore) * 100,
      keyData: [
        {
          type: 'calorieCount',
          name: 'Calories',
          icon: caloriesIcon,
          amount: data.keyData.calorieCount,
          unit: 'kCal'
        },
        {
          type: 'proteinCount',
          name: 'Protéines',
          icon: proteinsIcon,
          amount: data.keyData.proteinCount,
          unit: 'g'
        },
        {
          type: 'carbohydrateCount',
          name: 'Glucides',
          icon: carbsIcon,
          amount: data.keyData.carbohydrateCount,
          unit: 'g'
        },
        {
          type: 'lipidCount',
          name: 'Lipides',
          icon: lipidsIcon,
          amount: data.keyData.lipidCount,
          unit: 'g'
        }
      ]
    }
  }

  /**
   * Fetch daily activity data
   * @returns {Promise}
   */
  async getUserActivity() {
    const response = await fetchData(`${apiUrl}/user/${this.id}/activity`)
    const data = response.sessions

    const days = [
      'Dimanche',
      'Lundi',
      'Mardi',
      'Mercredi',
      'Jeudi',
      'Vendredi',
      'Samedi'
    ]

    return data.map((item) => ({
      day: `${days[new Date(item.day).getDay()]} ${new Date(item.day).getDate()}`,
      kilogram: item.kilogram,
      calories: item.calories
    }))
  }
  
  /**
   * Fetch average sessions data
   * @returns {Promise}
   */
  async getUserAverageSessions() {
    const response = await fetchData(`${apiUrl}/user/${this.id}/average-sessions`)
    const data = response.sessions

    return data.map((item) => ({
      day: item.day,
      sessionLength: item.sessionLength
    }))
  }

  /**
   * Fetch user performance data
   * @returns {Promise}
   */
  async getUserPerformance() {
    const response = await fetchData(`${apiUrl}/user/${this.id}/performance`)
    const data = response

    const formattedKinds = {
      cardio: 'Cardio', 
      energy: 'Énergie',
      endurance: 'Endurance',
      strength: 'Force',
      speed: 'Vitesse',
      intensity: 'Intensité'
    }

    return data.data.map((item, index) => ({
      value: item.value,
      kind: `${formattedKinds[data.kind[item.kind]]}`
    }))
  }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module.exports_module.exports.html">exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#getUserActivity">getUserActivity</a></li><li><a href="global.html#getUserAverageSessions">getUserAverageSessions</a></li><li><a href="global.html#getUserInfos">getUserInfos</a></li><li><a href="global.html#getUserPerformance">getUserPerformance</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Tue Nov 01 2022 13:31:14 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
